<!DOCTYPE html>
<html>
<title></title>

<head>
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.0/jquery.min.js"></script>
	<link href="css/bootstrap.css" rel="stylesheet">
	<link href="css/cadastroUsuario.css" rel="stylesheet">
	<script>
	

		function readyFn(jQuery) {
			$('#cadADM').hide();
			$('#funcionarioSelect').on("change", function () {
				$('#nome').val($('#funcionarioSelect :selected').text());
				$('#cpf').val($('#funcionarioSelect').val());
				var cpf=$('#cpf').val()
				$('#email').val($("#E"+cpf).val());
				$('#telefone').val($("#T"+cpf).val());
				 $('#cargosSelect').val($("#C"+cpf).val());
				escolheC();
			});
		}

		function escolheC() {
			if ($('#cargosSelect').val() == 1)
				$('#cadADM').show();
			else {
				$('#cadADM').hide();
			}
		}

		function escolheCargo() {
			$('#cargosSelect').on("change", function () {
				if ($('#cargosSelect').val() == 1)
					$('#cadADM').show();
				else {
					$('#cadADM').hide();
				}

			});
		}
		$(document).ready(escolheCargo);
		$(document).ready(readyFn);


		jQuery.fn.filterByText = function (textbox, selectSingleMatch) {
			return this.each(function () {
				var select = this;
				var options = [];
				$(select).find('option').each(function () {
					options.push({
						value: $(this).val(),
						text: $(this).text()
					});
				});
				$(select).data('options', options);
				$(textbox).bind('change keyup', function () {
					var options = $(select).empty().scrollTop(0).data('options');
					var search = $.trim($(this).val());
					var regex = new RegExp(search, 'gi');

					$.each(options, function (i) {
						var option = options[i];
						if (option.text.match(regex) !== null) {
							$(select).append(
								$('<option>').text(option.text).val(option.value)
							);
						}
					});
					if (selectSingleMatch === true &&
						$(select).children().length === 1) {
						$(select).children().get(0).selected = true;
					}
				});
			});
		};
		$(function () {
			$('#funcionarioSelect').filterByText($('#procurar'), true);
		});

		function atualiza() {

		}
	</script>

</head>

<body>
	<form action="/editarFuncionarioAcao" method="post" class="form-cadastro">
		<INPUT TYPE="hidden" NAME="tipo" VALUE="editar">
		<INPUT TYPE="hidden" NAME="nome" VALUE="" id="nome">
		<div class="form-group">
			<label for="cpf">CPF</label>
			<input type="text" class="form-control" id="cpf" name="cpf" readonly>
		</div>
		<div class="form-group">
			<label for="nome">Nome</label>
			<input type="text" name="procurar" list="funcionariosSelect" id="procurar" size="37" placeholder="pesuisar">
			<select class="form-control" name="funcionarioSelect" id="funcionarioSelect">
				<option th:each="funcionario : *{funcionarios}" th:value="${funcionario.cpf}"
					th:text="${funcionario.nome}">

				</option>

			</select>
			<div  th:each="funcionarioEmail: *{funcionarios}">
				<input type="hidden" th:name="'E'+${funcionarioEmail.cpf}" th:id="'E'+${funcionarioEmail.cpf}"
					th:value="${funcionarioEmail.email}" />
			</div>
			<div  th:each="funcionarioTelefone: *{funcionarios}">
				<input type="hidden" th:name="'T'+${funcionarioTelefone.cpf}" th:id="'T'+${funcionarioTelefone.cpf}"
					th:value="${funcionarioTelefone.telefone}" />
			</div>
			<div  th:each="funcionarioCargo: *{funcionarios}">
				<input type="hidden" th:name="'C'+${funcionarioCargo.cpf}" th:id="'C'+${funcionarioCargo.cpf}"
					th:value="${funcionarioCargo.cargo_id}" />
			</div>
		</div>
		<div class="form-group">
			<label for="email">Endere√ßo de email</label>
			<input type="email" id='email' name="email" class="form-control" aria-describedby="emailHelp"
				placeholder="Email">
		</div>
		<div class="form-group">
			<label for="telTXT">Telefone</label>
			<input type="tel" class="form-control" name="telefone" id="telefone" placeholder="(xx)xxxxxxxx">
		</div>
		<div class="form-group">
			<label for="cargosSelect">Escolha o cargo</label>
			<select class="form-control" name="cargosSelect" id="cargosSelect">
				<option th:each="cargo : *{cargos}" th:value="${cargo.id}" th:text="${cargo.atribuicao}">
				</option>
			</select>
			<div class="form-group" id="cadADM">
				<label for="login">Login</label>
				<input type="text" class="form-control" id="login" name="login">
				<label for="senha">Senha</label>
				<input type="password" class="form-control" id="senha" name="senha">
			</div>
		</div>
		<div>
			<a href="/voltaMenu" class="btn btn-lg btn-primary">Voltar</a>
			<button type="submit" class="btn btn-lg btn-primary" name="acao" id="acao" value="salvar">Salvar
				Funcionario</button>
		</div>
	</form>
</body>

</html>